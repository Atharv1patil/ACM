<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Brand Marquee â€” Tailwind + JS</title>

  <!-- Tailwind Play CDN (good for demos) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* Minor extra styles */
    .marquee-track {
      will-change: transform;
    }

    /* Tilt & subtle shadow like your original */
    .marquee-shell {
      transform: rotate(-1deg) scale(1.01);
    }

    /* Keyframes fallback (we use JS for robust speed/width handling) */
    @keyframes marquee {
      0% { transform: translateX(0%); }
      100% { transform: translateX(-50%); }
    }
  </style>
</head>
<body class="bg-gray-100">

  <main class="p-6">
    <!-- Container similar to your <section> -->
    <section class="relative marquee-shell border-y-2 border-zinc-900 bg-white overflow-hidden rounded-lg">
      <!-- moving region -->
      <div id="marquee" class="relative z-0 flex items-center gap-2 overflow-hidden">
        <div id="track" class="flex marquee-track">
          <!-- Logo items will be injected by JS from the template below -->
        </div>
      </div>

      <!-- fade overlays on both edges -->
      <div class="pointer-events-none absolute inset-y-0 left-0 w-32 z-10 bg-gradient-to-r from-white to-white/0"></div>
      <div class="pointer-events-none absolute inset-y-0 right-0 w-32 z-10 bg-gradient-to-l from-white to-white/0"></div>
    </section>
  </main>

  <!-- Template for one brand chip (you can expand this list inside JS) -->
  <template id="brand-template">
    <div class="flex items-center justify-center gap-4 px-4 py-3 md:py-4">
      <!-- example svg icon placeholder (replace with your icon path) -->
      <svg viewBox="0 0 24 24" aria-hidden="true" class="text-indigo-600 w-6 h-6 md:w-8 md:h-8" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="10"></circle>
      </svg>
      <span class="whitespace-nowrap text-lg md:text-xl font-semibold uppercase text-zinc-900">Brand</span>
    </div>
  </template>

  <script>
    /**
     * Brands Marquee
     * - List of brand names + optional SVGs (we use a simple placeholder SVG above)
     * - Clones track content to achieve infinite scrolling
     * - Uses requestAnimationFrame for smooth translation and pause-on-hover
     */

    const brands = [
      "Nike","3M","Abstract","Adobe","Airtable","Amazon","Box","Bytedance",
      "Chase","Cloudebees","BMW","Burton","Buildkite","Couchbase","Dailymotion",
      "deliveroo","Epic Games","Genius","GoDaddy","Heroku"
    ];

    const track = document.getElementById('track');
    const template = document.getElementById('brand-template');

    // Build a single row of items
    function buildRow() {
      const frag = document.createDocumentFragment();
      for (const name of brands) {
        const el = template.content.cloneNode(true);
        // set the brand text
        el.querySelector('span').textContent = name;
        // (Option) you could replace the SVG per brand here
        frag.appendChild(el);
      }
      return frag;
    }

    // Append two copies to allow seamless loop
    track.appendChild(buildRow());
    track.appendChild(buildRow());

    // scrolling variables
    let speed = 0.45; // pixels per frame (~0.45 gives a pleasant slow scroll). Adjust to taste.
    let paused = false;
    let offset = 0;
    let trackWidth = 0;

    function recalc() {
      // compute width of first half (we duplicated content)
      // track.children length is 2*brands.length. The loop will wrap at halfWidth.
      // we want halfWidth: width of the first group.
      const half = track.children.length / 2;
      let w = 0;
      for (let i = 0; i < half; i++) {
        w += track.children[i].getBoundingClientRect().width;
      }
      trackWidth = w;
    }

    // Pause on hover
    track.parentElement.addEventListener('mouseenter', () => { paused = true; });
    track.parentElement.addEventListener('mouseleave', () => { paused = false; });

    // Resize observer to recalc on layout changes
    const ro = new ResizeObserver(() => recalc());
    ro.observe(track);

    // initial calc once fonts / layout settle
    window.addEventListener('load', () => {
      // small timeout to let layout settle
      setTimeout(() => {
        recalc();
        requestAnimationFrame(loop);
      }, 50);
    });

    function loop() {
      if (!paused && trackWidth > 0) {
        offset += speed;
        if (offset >= trackWidth) {
          // wrap: subtract half width to keep seamless
          offset -= trackWidth;
        }
        // translate negative to move left
        track.style.transform = `translateX(${-offset}px)`;
      }
      requestAnimationFrame(loop);
    }

    // Make marquee responsive: adjust speed on small screens (optional)
    function adaptSpeed() {
      const w = window.innerWidth;
      if (w < 640) speed = 0.35;
      else if (w < 1024) speed = 0.45;
      else speed = 0.55;
    }
    window.addEventListener('resize', () => { adaptSpeed(); recalc(); });
    adaptSpeed();

    // Accessibility: allow keyboard focus to toggle pause
    track.parentElement.tabIndex = 0;
    track.parentElement.addEventListener('focus', () => paused = true);
    track.parentElement.addEventListener('blur', () => paused = false);

  </script>
</body>
</html>
